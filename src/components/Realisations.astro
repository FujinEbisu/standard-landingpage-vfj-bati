---
import CTAButton from './CTAButton.astro';
import { Image } from 'astro:assets';

---

<section class="realisations">
  <div class="container">
    <div class="content">
      <h2>Nos Réalisations</h2>
      <p class="lead">Découvrez quelques-uns de nos projets les plus marquants</p>

      <div class="realisations-grid">

        <!-- Before/After project Exemple -->
        <div class="realisation-item before-after">
          <h3>Construction Neuve</h3>
          <div class="before-after-container">
            <div class="before-image">

              <Image src="https://images.pexels.com/photos/4756489/pexels-photo-4756489.jpeg" alt="Avant rénovation"  width={600} height={400} loading="lazy" />
              <span class="image-label">Avant</span>
            </div>
            <div class="after-image">
                <Image src="https://images.pexels.com/photos/7746942/pexels-photo-7746942.jpeg" alt="Après rénovation" width={600} height={400} loading="lazy" />
              <span class="image-label">Après</span>
            </div>
          </div>
          <p>Maison sur mesure avec piscine</p>
        </div>

        <!-- Standard project Exemple -->
        <div class="realisation-item standard">
          <h3>Construction Neuve</h3>
          <div class="standard-image">
              <Image src="https://images.pexels.com/photos/1115804/pexels-photo-1115804.jpeg" alt="Bureau commercial moderne" width={600} height={400} loading="lazy" />
          </div>
          <p>Maison sur mesure avec porche pour les véhicules</p>
        </div>

        <!-- Another Before/After Exemple
        <div class="realisation-item before-after">
          <h3>Rénovation - Fosse de maintenance</h3>
          <div class="before-after-container">
            <div class="before-image">
                <Image src="https://scontent-cdg4-3.xx.fbcdn.net/v/t39.30808-6/522592716_1539668310648827_6590538486130515548_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=833d8c&_nc_ohc=ROzXsbSY8x4Q7kNvwF1qYB3&_nc_oc=AdnkSGWJQnCNhw2n3P57cQ5ODxZ3J9u7uXOEjD9P97ANI3xh8HaqZexJcHd--E-uulKTpnndlDXnijbWLH69piXE&_nc_zt=23&_nc_ht=scontent-cdg4-3.xx&_nc_gid=eIe_qqw0PK5FrsRRCOq6rQ&oh=00_AfZPmjv9Mrl75XA0SfRR1zExB3j6Ebtt5e0bXXapAfyR6g&oe=68D0610B" alt="Ancienne cuisine" width={600} height={400} loading="lazy" />
              <span class="image-label">Avant</span>
            </div>
            <div class="after-image">
                <Image src="https://scontent-cdg4-1.xx.fbcdn.net/v/t39.30808-6/515930018_1539668227315502_8592744708137661670_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=833d8c&_nc_ohc=fPtdJY_GFyQQ7kNvwFAAV2t&_nc_oc=AdmRK6M2E0-ruG4-rlN0CpnRgmkE5cllSOKJYfMlQl2Dwd0bfNxo7czhySEci0MtyXHZo_XTfZkm6vqTJ7DZaGSs&_nc_zt=23&_nc_ht=scontent-cdg4-1.xx&_nc_gid=nN9xvIVAuhLhyXhbLQGPLA&oh=00_AfZSAAUGkeDD_eXobJfsU7IFTU8Ohlqjgefm_DssZ8rleg&oe=68D03C0E" alt="Nouvelle cuisine" width={600} height={400} loading="lazy" />
              <span class="image-label">Après</span>
            </div>
          </div>
          <p>Atelier à Auterive, rénovation complète de la fosse de maintenance.</p>
        </div> -->

      </div>

      <div class="actions">
        <CTAButton label="Je demande un devis" />
      </div>
    </div>
  </div>
</section>

<!-- Image Modal -->
<div id="image-modal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="modal-img" alt="Modal Image">
</div>

<script>
  // Modal functionality
  const modal = document.getElementById('image-modal');
  const modalImg = document.getElementById('modal-img');
  const closeBtn = document.querySelector('.close');

  // Get all images in realisations
  const images = document.querySelectorAll('.realisation-item img');

  // Add click event to each image
  images.forEach(img => {
    img.style.cursor = 'pointer';
    img.addEventListener('click', function() {
      modal.style.display = 'block';
      modalImg.src = this.src;
      modalImg.alt = this.alt;
    });
  });

  // Close modal when clicking close button
  closeBtn.addEventListener('click', function() {
    modal.style.display = 'none';
  });

  // Close modal when clicking outside the image
  modal.addEventListener('click', function(event) {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  });

  // Close modal with Escape key
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape' && modal.style.display === 'block') {
      modal.style.display = 'none';
    }
  });
</script>
